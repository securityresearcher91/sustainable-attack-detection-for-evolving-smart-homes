PRE-REQUISITES:
Install CICFlowMeter
```
git clone https://github.com/hieulw/cicflowmeter
cd cicflowmeter
uv sync
source .venv/bin/activate
```

Terminal 1: Run camera simulator on the device simulator Raspberry Pi (refer to simulator/camera/README)
Terminal 2: Run the scenario_simulator on the monitor Raspberry Pi (refer to simulator/camera/README)

Terminal 3: Save simulator network traffic
python online_detector_dl.py --attacker-mac MACBOOK_IP --camera-mac SIMULATOR_MAC
```
ssh SIMULATOR_USERNAME@SIMULATOR_IP "sudo tcpdump -i wlan0 -U -w - ether host SIMULATOR_MAC" > SIMULATOR.pcap
```

Terminate all commands above once sufficient data has been collected

Create folder to process the PCAP files into chunks
```
mkdir camera_pcap
cd camera_pcap
```

Split the captured pcap file into 10MB chunks to process the data the same as the CICIoT2023 dataset
```
tcpdump -r ../SIMULATOR.pcap -r SIMULATOR.pcap -C 10
```

Rename all pcaps
```
./rename.sh
```

Convert the pcaps into CSV using CICflowmeter
```
./convert_pcaps.sh
```

Combine the CSVs generated by CICFlowMeter
```
./combine_csv.sh
```